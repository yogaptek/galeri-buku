<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>OAuth2 Callback</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 2rem; max-width: 600px; margin: auto; text-align: center; }
  </style>
</head>
<body>
  <h2>üîê Autentikasi Google Berhasil</h2>
  <p>Anda telah berhasil login dengan akun Google.</p>
  <div id="tokenStatus" class="mt-3"></div>
  <a href="index.html" class="btn btn-primary mt-4">Lanjut ke Form Upload</a>

  <script>
    function parseQueryString() {
      const params = {};
      const query = window.location.hash.substring(1); // OAuth token biasanya dikirim via hash
      const pairs = query.split("&");
      for (const pair of pairs) {
        const [key, value] = pair.split("=");
        params[decodeURIComponent(key)] = decodeURIComponent(value || "");
      }
      return params;
    }

    const tokenData = parseQueryString();
    if (tokenData.access_token) {
      localStorage.setItem("google_access_token", tokenData.access_token);
      document.getElementById("tokenStatus").innerHTML =
        `<div class="alert alert-success">‚úÖ Token disimpan. Anda bisa lanjut mengunggah file.</div>`;
    } else {
      document.getElementById("tokenStatus").innerHTML =
        `<div class="alert alert-danger">‚ùå Token tidak ditemukan. Silakan login ulang.</div>`;
    }
  </script>
</body>
</html>
